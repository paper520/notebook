<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset='utf-8'>
    <title>离线小助手</title>
    <link rel="icon" href="../../favicon.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no,maximum-scale=1" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no" />
    <meta name="Keywords" content="离线小助手" />
    <meta name="description" content="离线小助手" />
    <meta name="author" content="心叶" />
    <link rel="apple-touch-icon" sizes="52x52" href="52icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="72icon.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="120icon.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="144icon.png" />
    <link rel="stylesheet" href="../../easycss-1.0.0.css">
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="../../notebooks/style.css">
</head>

<body>
    <header>
        <ul>
            <li onclick='window.location.href="https://github.com/yelloxing/yelloxing.github.io"'>离线小助手</li>
            <li onclick='window.location.href="../../index.html#/apis"'>API查询</li>
            <li onclick='window.location.href="../../index.html#/notebooks"'>文档笔记</li>
            <li onclick='window.location.href="../../index.html#/tools"'>小工具</li>
            <li onclick='window.location.href="../../index.html#/subjects"'>专题学习</li>
            <li onclick='window.location.href="../../index.html#/components"'>自定义组件</li>
            <li onclick='window.location.href="../../index.html#/mores"'>流水学习</li>
            <li onclick='window.location.href="../../index.html#/others"'>其它</li>
            <li>
                <input type="text" placeholder="search...">
            </li>
        </ul>
    </header>
    <em class='position'>当前位置：更多 / 框架或类库 / vue2系统学习随手笔记 / [05] 自定义指令</em>
    <section>
        <div class="title">基本语法</div>
        <div class="block">
            指令更多的是关于DOM元素的操作，自定义指令分为全局注册和局部注册（内置指令比如v-model）：
        </div>
        <div class="name">
            全局注册
        </div>
        <pre class="code">
import Vue from 'vue';

Vue.directive('指令名称', {

    /*指令代码，也就是实现一些钩子函数*/

});</pre>
        <div class="name">
            局部注册
        </div>
        <div class="block">
            组件中接受一个directives的选项，可以实现局部注册。
        </div>
        <pre class="code">
import Vue from 'vue';

Vue.component('show-component', {
    
    ......

    directives: {
        '指令名称':{

            /*指令代码，也就是实现一些钩子函数*/

        }
    }

});</pre>
    </section>
    <section>
        <div class="title">用例</div>
        <div class="block">
            现在有一个输入框，需要初始化获取焦点，可以定义一个v-focus指令来实现：
        </div>
        <pre class="code">
import Vue from 'vue';   
                
Vue.directive('focus', {
                  
    // 当被绑定的元素插入到 DOM 中时
    inserted: function (el) {
            
        el.focus();

    }

});</pre>
    </section>
    <section>
        <div class="title">生命周期钩子</div>
        <div class="block">
            一个指令定义对象可以提供如下几个钩子函数 (均为可选)：
            <ul>
                <li>1.bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置；</li>
                <li>2.inserted：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)；</li>
                <li>3.update：所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新；</li>
                <li>4.componentUpdated：指令所在组件的 VNode 及其子 VNode 全部更新后调用；</li>
                <li>5.unbind：只调用一次，指令与元素解绑时调用。</li>
            </ul>
        </div>
    </section>
    <section>
        <div class="title">钩子函数参数</div>
        <div class="block">
            钩子函数的参数一个有四个，顺序排列为：el、binding、vnode和oldNode（除了el之外，其它参数都应该是只读的，切勿进行修改）。
            <ul>
                <li>1.el：代表的是指令绑定的DOM结点，用于操作结点；</li>
                <li>2.binding：一个对象，包括了很多信息；</li>
                <li>3.vnode：Vue 编译生成的虚拟节点；</li>
                <li>4.oldNode：上一个虚拟节点，仅在update和componentUpdated钩子中可用。</li>
            </ul>
        </div>
    </section>
    <footer>
        心叶 &copy;2007-2019 走一步，再走一步
    </footer>
</body>

</html>