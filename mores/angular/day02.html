<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset='utf-8'>
    <title>离线小助手</title>
    <link rel="icon" href="../../favicon.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="widtd=device-widtd, initial-scale=1, user-scalable=no,maximum-scale=1" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no" />
    <meta name="Keywords" content="离线小助手" />
    <meta name="description" content="离线小助手" />
    <meta name="autdor" content="心叶" />
    <link rel="apple-touch-icon" sizes="52x52" href="52icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="72icon.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="120icon.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="144icon.png" />
    <link rel="stylesheet" href="../../easycss-1.0.0.css">
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="../../notebooks/style.css">
    <link rel="stylesheet" href="../../apis/style.css">
    <style>
        table {
            width: 100%;
        }
    </style>
</head>

<body>
    <header>
        <ul>
            <li onclick='window.location.href="https://gitdub.com/yelloxing/yelloxing.gitdub.io"'>离线小助手</li>
            <li onclick='window.location.href="../../index.html#/apis"'>API查询</li>
            <li onclick='window.location.href="../../index.html#/notebooks"'>文档笔记</li>
            <li onclick='window.location.href="../../index.html#/tools"'>小工具</li>
            <li onclick='window.location.href="../../index.html#/subjects"'>专题学习</li>
            <li onclick='window.location.href="../../index.html#/components"'>自定义组件</li>
            <li onclick='window.location.href="../../index.html#/mores"'>流水学习</li>
            <li onclick='window.location.href="../../index.html#/others"'>其它</li>
            <li>
                <input type="text" placeholder="search...">
            </li>
        </ul>
    </header>
    <em class='position'>当前位置：更多 / 框架或类库 / Angular系统学习随手笔记 / [02] 基本的组件说明、自定义组件和部分细节说明</em>
    <section>
        <div class="title">基本说明</div>
        <div class="block">
            组件是Angular中非常重要的一个东西，是拥有模板的指令，是构成Angular应用的基础和核心，被用来包装特定的功能，应用程序的有序运行依赖于组件之间的协同工作。
        </div>
    </section>
    <section>
        <div class="title">自定义组件</div>
        <div class="block">
            假如现在有一列数据，需要使用ul和li标签显示出来，可以自定义一个名称为ui-show标签，组件代码如下（代码位于show.component.ts）：
        </div>
        <pre class="code">
import { Component } from '@angular/core';
                
@Component({
                
    selector: 'ui-show',
                
    template: '&lt;ul&gt;&lt;li *ngFor="let row of dataList"&gt;ID:{{row.id}}  INFO:{{row.info}}&lt;/li&gt;&lt;/ul&gt;',
                
    styles: [`ul{background-color: antiquewhite;padding-left: 10px;list-style: none;}`]
                
})
export class ShowComponent {
                
    dataList = [
        { id: 1, info: "Angular" },
        { id: 2, info: "React" },
        { id: 3, info: "Vue" }
    ];
                
}</pre>
        <div class="block">
            此时，组件已经定义完成，为了可以使用，你需要在模块（比如根模块app.module.ts）中引入，如下（去掉了一些不需要说明的代码）：
        </div>
        <pre class="code">
import { NgModule } from '@angular/core';
            
import { ShowComponent } from './show.component';
            
@NgModule({
            
    declarations: [
        ShowComponent
    ]
                
})
......
    </pre>
        <div class="block">
            现在，你可以使用标签ui-show来显示那些数据了。
        </div>
        <div class="name">
            selector选项
        </div>
        <div class="block">
            类似AngularJS，Angular的selector除了上面的自定义标签，还有别的：
            <ul>
                <li>
                    1.selector: 'element-name'//自定义标签选择器；
                </li>
                <li>
                    2.selector: '.class'//样式选择器；
                </li>
                <li>
                    3.selector: '[attribute]'//属性选择器；
                </li>
                <li>
                    4.selector: '[attribute=value]'//属性值选择器；
                </li>
                <li>
                    5.selector: ':not(sub_selector)'//取反选择器；
                </li>
                <li>
                    6.selector: 'selector1, selector2'//多种选择器。
                </li>
            </ul>
        </div>
        <div class="name">
            template和templateUrl选项
        </div>
        <div class="block">
            html模板除了上面例子中直接写在组件文件中，还可以这样：
        </div>
        <div class="code">
            templateUrl:'./show.component.html'
        </div>
        <div class="block">
            这样，具体的模板在.html文件中开发，更容易维护，如果模板比较复杂的话。
        </div>
        <div class="name">
            styles和styleUrls选项
        </div>
        <div class="block">
            样式文件也一样，除了上面使用styles选项直接写在组件文件中以外，还可以这样：
        </div>
        <div class="code">
            styleUrls:['./show.component.css']
        </div>
        <div class="block">
            这样，在.css文件中开发样式就比较容易书写了。
        </div>
        <div class="block">
            上面三个是常见的选项，比较简单也比较常用，除此之外，还有很多选项可以选择，后续再说明。
        </div>
    </section>
    <section>
        <div class="title">生命周期钩子</div>
        <div class="block">
            组件（当然包括指令）的实例有一个生命周期，Angular提供了钩子可以让开发者在需要的时期触发预先定义的方法，称为
            <em class="important">生命周期钩子接口</em>。下面展示了这些钩子的顺序：
        </div>
        <table>
            <tbody>
                <tr>
                    <th>钩子</th>
                    <th>用途及时机</th>
                </tr>
                <tr>
                    <td>ngOnChanges()</td>
                    <td>当 Angular（重新）设置数据绑定输入属性时响应。 该方法接受当前和上一属性值的SimpleChanges对象。当被绑定的输入属性的值发生变化时调用，首次调用一定会发生在 ngOnInit() 之前。</td>
                </tr>
                <tr>
                    <td>ngOnInit()</td>
                    <td>在 Angular 第一次显示数据绑定和设置指令/组件的输入属性之后，初始化指令/组件。在第一轮 ngOnChanges() 完成之后调用，只调用一次。</td>
                </tr>
                <tr>
                    <td>ngDoCheck()</td>
                    <td>检测，并在发生 Angular 无法或不愿意自己检测的变化时作出反应。在每个 Angular 变更检测周期中调用，ngOnChanges() 和 ngOnInit() 之后。</td>
                </tr>
                <tr>
                    <td>ngAfterContentInit()</td>
                    <td>当把内容投影进组件之后调用。第一次 ngDoCheck() 之后调用，只调用一次。</td>
                </tr>
                <tr>
                    <td>ngAfterContentChecked()</td>
                    <td>每次完成被投影组件内容的变更检测之后调用。ngAfterContentInit() 和每次 ngDoCheck() 之后调用。</td>
                </tr>
                <tr>
                    <td>ngAfterViewInit()</td>
                    <td>初始化完组件视图及其子视图之后调用。第一次 ngAfterContentChecked() 之后调用，只调用一次。</td>
                </tr>
                <tr>
                    <td>ngAfterViewChecked()</td>
                    <td>每次做完组件视图和子视图的变更检测之后调用。ngAfterViewInit() 和每次 ngAfterContentChecked() 之后调用。</td>
                </tr>
                <tr>
                    <td>ngOnDestroy()</td>
                    <td>当 Angular 每次销毁指令/组件之前调用并清扫。 在这儿反订阅可观察对象和分离事件处理器，以防内存泄漏。在 Angular 销毁指令/组件之前调用。</td>
                </tr>
            </tbody>
        </table>
        <div class="block">
            需要注意的是，你不需要全部实现这些钩子的方法，而且这些钩子也不是总有效，有的只有在组件中定义才有意义。
        </div>
        <div class="name">
            如何使用？
        </div>
        <div class="block">
            比如要使用ngOnInit()这个钩子，在初始化的时候处理一些东西，可以这样：
        </div>
        <pre class="code">
......

export class ShowComponent implements OnInit{

    ......

    ngOnInit() {
        //todo
    }

}</pre>
    </section>
    <footer>
        心叶 &copy;2007-2019 走一步，再走一步
    </footer>
</body>

</html>