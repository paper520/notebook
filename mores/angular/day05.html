<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset='utf-8'>
    <title>离线小助手</title>
    <link rel="icon" href="../../favicon.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no,maximum-scale=1" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no" />
    <meta name="Keywords" content="离线小助手" />
    <meta name="description" content="离线小助手" />
    <meta name="author" content="心叶" />
    <link rel="apple-touch-icon" sizes="52x52" href="52icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="72icon.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="120icon.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="144icon.png" />
    <link rel="stylesheet" href="../../easycss-1.0.0.css">
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="../../notebooks/style.css">
</head>

<body>
    <header>
        <ul>
            <li onclick='window.location.href="https://github.com/yelloxing/notebook"'>离线小助手</li>
            <li onclick='window.location.href="../../index.html#/apis"'>API查询</li>
            <li onclick='window.location.href="../../index.html#/notebooks"'>文档笔记</li>
            <li onclick='window.location.href="../../index.html#/tools"'>小工具</li>
            <li onclick='window.location.href="../../index.html#/subjects"'>专题学习</li>
            <li onclick='window.location.href="../../index.html#/mores"'>流水学习</li>
            <li onclick='window.location.href="../../index.html#/others"'>其它</li>
            <li>
                <input type="text" placeholder="search...">
            </li>
        </ul>
    </header>
    <em class='position'>当前位置：更多 / 框架或类库 / Angular系统学习随手笔记 / [05] 属性型指令和结构型指令</em>
    <section>
        <div class="title">基本说明</div>
        <div class="block">
            组件其实是指令的一种，是一种特殊的指令，其带有模板，而且使用的很频繁。除此之外，还有二种指令，分别是属性型指令和结构型指令。
        </div>
        <div class="block">
            属性型指令通过改变元素、组件或其它指令的外观和行为的指令；结构型指令则是通过添加和移除DOM元素改变DOM布局的指令。
        </div>
    </section>
    <section>
        <div class="title">属性型指令</div>
        <div class="block">
            属性型指令至少需要一个带有@Directive装饰器的控制器类，该装饰器指定了一个用于标识属性的选择器，控制器类实现了指令需要的指令行为。
        </div>
        <div class="name">基本使用</div>
        <div class="block">
            自定义一个指令ui-important用来标记重要文字，指令代码如下【代码在important.directive.ts】：
        </div>
        <pre class="code">
import { Directive, ElementRef } from '@angular/core';
                
@Directive({
    selector: '[ui-important]'
})
export class ImportantDirective {
                  
    constructor(el: ElementRef) {
        el.nativeElement.style.color = 'red';
    }

}</pre>
        <div class="block">
            在使用前，需要先引入：
        </div>
        <pre class="code">
......                
import { ImportantDirective } from './important.directive';  
......
@NgModule({
    declarations: [
        ......
        ImportantDirective
    ],
......</pre>
        <div class="block">
            接着，就可以使用了：
        </div>
        <div class="code">
            &lt;div ui-important&gt;指令的学习&lt;/div&gt;
        </div>
        <div class="block">
            这里指令通过构造函数注入目标结点，从而修改样式为红色。
        </div>
        <div class="name">响应用户引发的事件</div>
        <div class="block">
            有时候，需要根据用户的行为来修改元素，比如鼠标进入以后才变红，可以这样修改指令：
        </div>
        <pre class="code">
import { Directive, ElementRef, HostListener } from '@angular/core';
                
@Directive({
    selector: '[ui-important]'
})
export class ImportantDirective {
                
    node: ElementRef;
                
    // 鼠标进入触发
    @HostListener('mouseenter') onMouseEnter() {
        this.node.nativeElement.style.color = 'red';
    }
                
    constructor(el: ElementRef) {
        this.node = el;
    }
}</pre>
    </section>
    <section>
        <div class="title">结构型指令</div>
        <div class="block">
            该指令用于添加、移除或维护结点元素，可以把结构型指令应用到一个宿主元素上，然后它就可以对宿主元素及其子元素做点什么。需要注意的是，你可以在一个宿主元素上应用多个属性型指令，但只能应用一个结构型指令。
        </div>
    </section>
    <footer>
        心叶 &copy;2007-2019 走一步，再走一步
    </footer>
</body>

</html>